<!-- app/views/movies/index.html.erb -->
<h1>Filmes</h1>

<% if @movies.present? %>
  <ul>
    <% @movies.each do |movie| %>
      <li>
        <% if movie.is_a?(Hash) %>
          <%= movie["Title"] %> (<%= movie["Year"] %>)
          <%= button_to 'Adicionar aos Favoritos', movies_path(imdb_id: movie["imdbID"]), method: :post %>
        <% else %>
          <%= link_to movie.title, movie_path(movie) %>
        <% end %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>Nenhum filme encontrado.</p>
<% end %>

<hr>

<h2>Buscar Filmes</h2>

<%= form_tag search_movies_path, method: :get do %>
  <%= text_field_tag :q, params[:q], placeholder: "Digite o tÃ­tulo do filme" %>
  <%= submit_tag "Buscar" %>
<% end %>

<%= link_to 'Adicionar Novo Filme', new_movie_path %>
